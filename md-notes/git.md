## git笔记

### 简介

git是一种分布式版本控制系统。与其他传统版本控制系统相比，最大的特点就是分布式，以及分支操作的快速便捷。    

分布式意味着每一个项目的参与者都有一个完整的项目副本，而不是仅仅在每次需要时从集中管理的服务器拉取部分内容进行编辑。好处在于有本地仓库，可以更快且不受网络限制的在自己的本地分支中进行任何开发和更改，且不会因为唯一的服务器宕机而破坏开发进展。  

git不是基于差异记录版本文件的，而是基于快照。即版本各个变化都会产生基于变化的文件的快照，而不是仅仅记录变化细节。正因为如此，git才可以支持创建大量分支，而且可以迅速进行分支之间的的切换，因为创建分支只是在现有共同祖先基础上分叉，不同分支拥有不同的差异文件，所以创建很快，而且每个分支都是现成的完整的文件系统，不需要进行差异计算来切换到另一个分支，直接进行相当于目录切换的操作即可，所以切换成本很低。  

git区分版本节点是基于快照的校验和，git文件存储也是基于元数据方式存储，文件任何更改都会导致校验和变化从而被git检查出，更加能保证文件内容的完整性。

相比于简单易于学习和操作的subversion等版本控制系统，git更注重效率，学习成本也更高，git在基于github托管的开源项目应用很重要，而多数小型公司更倾向于选择subversion，但是这并不是说git只能进行开源项目的开发。只要在服务器上下载git，并把项目目录初始化为git仓库，添加追踪，就可以使用git进行合作开发。  

### 基础操作

#### 服务器上初始化目录为git仓库

进入项目目录，运行git命令：

`git init`

创建一个空的git仓库，然后运行git命令：

`git add *`

将项目文件都加入暂存区（或者只添加想要通过git管理的部分），以备进一步提交到本地服务器仓库。

运行git命令：

`git commit -m "track all files of this project"`

将所有暂存区文件提交到本地服务器仓库，每次提交操作都会产生一个快照，相当于一个小的版本变化，必须注明快照变化，即通过-m和后面的注释进行快照说明。

对于团队开发且服务器只用于存储公共仓库而不再服务器上直接开发的，服务器上的仓库应该设置为裸仓库，以免合作者推送到服务器上时因为服务器分支存在工作目录而拒绝推送。或者可以在服务器上建立一个分支并切换到新建分支，这样合作者就可以推送到原来的分支了。

#### 本地克隆服务器上的分支

在本地可以安装git bash，进入想要克隆到的目录，执行

`git clone [user]@server:/path/to/repository`

现在本地仓库已经克隆完成，在本地进行项目开发，在一定时机推送开发的内容回服务器即可。首先，对需要更改的内容进行更改，然后执行

`git status`

查看工作区编辑的变化，决定哪些变化要提交。运行

`git add filename`

将列出的需要提交的变化的文件添加到暂存区，运行

`git commit -m "some version explain"`

将暂存区文件提交到本地仓库，并产生一次快照。运行

`git push `

将本地分支的变化推送到服务器，完成。



