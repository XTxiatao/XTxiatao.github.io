## 计算机组成原理重点知识记录

### 硬件架构的取舍

​    计算机主要硬件组成为CPU（GPU），内存，硬盘，输入输出设备。根据应用场景选择合适的硬件搭配，一般要考虑成本、最低性能、可用性、可扩展性等因素，没有任何场景都适用的一套方案。

   #### 处理器

​    从处理器角度看，CPU相对于GPU、TPU而言是通用计算芯片，主要可以分为精简指令集架构和复杂微指令集架构。二者分歧在于精简指令集架构的指令简单，指令数少，单指令执行快，但程序编译出的指令数较多，必须用多个指令组合来完成可能复杂指令集一个指令对应的工作，总体而言功耗更低，性能更差。复杂微指令集的指令数多一些，且针对并行等的优化更多，多任务处理能力强，功耗大。从市场定位上看，前者定义为移动端客户端市场，而后者定位PC端，并且是服务端的唯一选择。

​    若场景处理并行计算为主，如机器学习，神经网络，三维渲染等，降低CPU的性能要求，配合适合的GPU或TPU更佳。

#### 内存

​    内存的作用主要是硬盘与CPU之间的缓存，内存的大小决定了能同时加载运行的程序数量和数据量，内存太小则缓存命中率降低，频繁与硬盘交换数据会拖慢程序速度。作为缓存，能预测CPU后续需要的数据并提前从硬盘加载到内存是关键，也因此，对于难以预测数据请求位置的场景，内存对速度的提升作用就很小，甚至因为必须先加载到内存再加载到CPU这个流程而反倒降低数据流通速度。所以，通过增加内存来提升速度必须得是可预测的连续请求。

#### 硬盘

​    硬盘主要分为机械硬盘（HDD）和固态硬盘（SSD），二者从物理构造到工作方式都有很大差别。

​    SSD相对而言随机读写速度更快，价格也更高。SSD的数据读取是靠电路连接直接读取到对应地址单元数据的，而HDD则是通过磁头移动到地址单元读取数据，所以随机读取速度上，SSD优势巨大。逻辑上随机写的场景，在具体实现手段上，SSD与HDD也不相同。SSD的读写操作是不一样的，读操作以页为单位加载进内存中，但是数据更改（写）不是直接在原数据页的位置覆盖写，而是把写的内容存放在新的页中，更改数据映射关系，从而更新数据内容。而HDD则是直接磁头作用与原地址，彻底改变数据。这也是固态硬盘有时可以在数据误删的情况下找回的原因。标记而非真的删除原内容，与MySQL的删除记录的逻辑是一样的。也因此，SSD的随机写操作实际上是顺序写，速度也比HDD更具快。

​    当更新数据的次数累计到一定程度，SSD中的旧数据占用大量存储页，没有足够空间追加新的数据页时，就必须进行数据搬迁。此处关键在于SSD不能覆盖写，而擦除数据只能以很多页组成的块为单位，所以要把有用数据迁到一起，无用数据的块擦除，以备后续更新使用。SSD的块随着擦除次数的增加，数据安全性会降低甚至完全不能用，所以SSD使用寿命远远不如HDD，随着使用时间增加，可用存储空间也会逐渐减少。

​    鉴于此，在SSD的优势随机读写并不关键的场景，采用HDD是更实惠的选择，对于必须采用SSD的场合，就必须考虑SSD的寿命问题，适时更换新的硬盘。

​    此外，随机读写的数据要经常由I/O接口导流，所以接口类型也是随机读写速度的关键影响因素。不同SSD支持的接口类型也可能不同。

### 分章节手写笔记

[冯·诺伊曼体系](pdf/冯诺伊曼体系.pdf)

[计算机原理知识体系和参考书目](pdf/计算机原理知识体系和参考书目.pdf)

[计算机性能](pdf/计算机性能.pdf)

[计算机指令](pdf/计算机指令.pdf)

[指令跳转](pdf/指令跳转.pdf)

[函数调用和栈溢出](pdf/函数调用和栈溢出.pdf)

[程序装载](pdf/程序装载.pdf)

[动态链接共享库](pdf/动态链接共享库.pdf)

[二进制编码](pdf/二进制编码.pdf)

[浮点数](pdf/浮点数.pdf)

[CPU中的数据流](pdf/cpu中的数据流.pdf)

[流水线指令设计](pdf/流水线指令设计.pdf)

[冒险和预测](pdf/冒险和预测.pdf)

[超标量和超长指令字](pdf/超标量和超长指令字.pdf)

[加速矩阵乘法和超线程技术](pdf/加速矩阵乘法和超线程技术.pdf)

[异常和中断](pdf/异常和中断.pdf)

[CISC和RISC](pdf/CISC和RISC.pdf)

[显卡GPU](pdf/显卡GPU.pdf)

[虚拟机和容器技术](pdf/虚拟机和容器技术.pdf)

[存储设备架构](pdf/存储设备架构.pdf)

[缓存的好处和风险](pdf/缓存的好处和风险.pdf)

[虚拟内存和页表](pdf/虚拟内存和页表.pdf)

[总线](pdf/总线.pdf)

[输入输出与接口](pdf/输出输出与接口.pdf)

[接口等待](pdf/接口等待.pdf)

[ssd和hdd](pdf/ssd和hdd.pdf)

[DMA和Kafka](pdf/DMA和Kafka.pdf)

[ECC和海明码](pdf/ECC和海明码.pdf)

[分布式](pdf/分布式.pdf)

[存储器种类](pdf/存储器种类.pdf)

[架构设计理念](pdf/架构设计理念.pdf)

